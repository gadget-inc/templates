query ($time: String, $shop: String, $startDate: DateTime, $endDate: DateTime) {
  shopifyOrders {
    sales: sum(priceInCAD)
    time: dateTrunc($time, date: shopifyCreatedAt)
    average: sum(priceInCAD) / count(orders)

    [
      where (
        (isNull($startDate) ? true : (shopifyCreatedAt >= ($startDate))) &&
        (isNull($endDate) ? true : (shopifyCreatedAt <= ($endDate))) &&
        (isNull($shop) || $shop == "" ? true : (shopId == $shop))
      )
      group by time
    ]
  }
}